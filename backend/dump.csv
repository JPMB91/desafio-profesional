-- H2 2.3.232;
;             
CREATE USER IF NOT EXISTS "RENTACAR" SALT '925a6d4b9d025066' HASH 'a875839dbe10c0e9f1f986e2b16b3ad68e3d746b663f236d22389603da22efb4' ADMIN;   
CREATE CACHED TABLE "PUBLIC"."CATEGORIES"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 35) NOT NULL,
    "CATEGORY_DESCRIPTION" CHARACTER VARYING(255),
    "NAME" CHARACTER VARYING(255) NOT NULL
);      
ALTER TABLE "PUBLIC"."CATEGORIES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_6" PRIMARY KEY("ID");   
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.CATEGORIES;              
INSERT INTO "PUBLIC"."CATEGORIES" VALUES
(34, U&'El sed\00e1n es un auto amplio de carrocer\00eda cl\00e1sica de tres vol\00famenes separados: motor, habit\00e1culo, y maletero, con puertas totalmente aut\00f3nomas.', U&'Sed\00e1n');    
CREATE CACHED TABLE "PUBLIC"."CATEGORIES_IMAGES"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 35) NOT NULL,
    "FILENAME" CHARACTER VARYING(255),
    "CATEGORY_ID" BIGINT
);             
ALTER TABLE "PUBLIC"."CATEGORIES_IMAGES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_66" PRIMARY KEY("ID");           
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.CATEGORIES_IMAGES;       
INSERT INTO "PUBLIC"."CATEGORIES_IMAGES" VALUES
(34, '9a877950-7b61-4be2-adbf-49a5f3b993c4_sedan-category.jpg', 34);         
CREATE CACHED TABLE "PUBLIC"."CHARACTERISTIC_IMAGES"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 33) NOT NULL,
    "FILENAME" CHARACTER VARYING(255),
    "CHARACTERISTIC_ID" BIGINT
);   
ALTER TABLE "PUBLIC"."CHARACTERISTIC_IMAGES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_2" PRIMARY KEY("ID");        
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.CHARACTERISTIC_IMAGES;   
INSERT INTO "PUBLIC"."CHARACTERISTIC_IMAGES" VALUES
(1, '11bc300e-f377-4e36-8a48-8c4b38dac2eb_car-citroen-top-vehicle-svgrepo-com-1-.svg', 1);               
CREATE CACHED TABLE "PUBLIC"."CHARACTERISTICS"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 33) NOT NULL,
    "NAME" CHARACTER VARYING(255)
);              
ALTER TABLE "PUBLIC"."CHARACTERISTICS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_E" PRIMARY KEY("ID");              
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.CHARACTERISTICS;         
INSERT INTO "PUBLIC"."CHARACTERISTICS" VALUES
(1, 'Sunroof');
CREATE CACHED TABLE "PUBLIC"."RESERVATIONS"(
    "ID" UUID NOT NULL,
    "END_DATE" DATE,
    "START_DATE" DATE,
    "USER_ID" UUID NOT NULL,
    "VEHICLE_ID" UUID,
    "MESSAGE" CHARACTER VARYING(255),
    "CREATED_AT" TIMESTAMP(6)
);           
ALTER TABLE "PUBLIC"."RESERVATIONS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4" PRIMARY KEY("ID"); 
-- 0 +/- SELECT COUNT(*) FROM PUBLIC.RESERVATIONS;            
CREATE CACHED TABLE "PUBLIC"."REVIEW"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 41) NOT NULL,
    "COMMENT" CHARACTER VARYING(800),
    "CREATED_AT" TIMESTAMP(6),
    "SCORE" INTEGER NOT NULL,
    "USER_ID" UUID,
    "VEHICLE_ID" UUID
);        
ALTER TABLE "PUBLIC"."REVIEW" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_8F" PRIMARY KEY("ID");      
-- 9 +/- SELECT COUNT(*) FROM PUBLIC.REVIEW;  
INSERT INTO "PUBLIC"."REVIEW" VALUES
(1, 'bieeen', TIMESTAMP '2025-03-13 22:49:29.74798', 4, UUID '16ef4644-dac7-4c0c-b2db-15a9a6d10f7b', UUID 'a4f1e02e-5c02-4936-af15-0208c4b41234'),
(33, '', TIMESTAMP '2025-03-14 23:00:26.389124', 3, UUID '602ed6a4-cfa9-4bff-87e5-a105fcf47ebd', UUID 'a4f1e02e-5c02-4936-af15-0208c4b41234'),
(34, '', TIMESTAMP '2025-03-14 23:01:31.602934', 2, UUID '602ed6a4-cfa9-4bff-87e5-a105fcf47ebd', UUID 'a4f1e02e-5c02-4936-af15-0208c4b41234'),
(35, '', TIMESTAMP '2025-03-14 23:10:30.73827', 1, UUID '602ed6a4-cfa9-4bff-87e5-a105fcf47ebd', UUID 'a4f1e02e-5c02-4936-af15-0208c4b41234'),
(36, 'test review', TIMESTAMP '2025-03-17 18:01:56.422653', 4, UUID '602ed6a4-cfa9-4bff-87e5-a105fcf47ebd', UUID 'a4f1e02e-5c02-4936-af15-0208c4b41234'),
(37, '', TIMESTAMP '2025-03-18 15:11:42.44159', 3, UUID '602ed6a4-cfa9-4bff-87e5-a105fcf47ebd', UUID 'a4f1e02e-5c02-4936-af15-0208c4b41234'),
(38, '', TIMESTAMP '2025-03-18 15:59:23.75964', 2, UUID '602ed6a4-cfa9-4bff-87e5-a105fcf47ebd', UUID 'a4f1e02e-5c02-4936-af15-0208c4b41234'),
(39, 'ULTOMA', TIMESTAMP '2025-03-19 22:58:18.336338', 5, UUID '602ed6a4-cfa9-4bff-87e5-a105fcf47ebd', UUID 'a4f1e02e-5c02-4936-af15-0208c4b41234'),
(40, 'probando 12', TIMESTAMP '2025-03-25 20:47:19.510002', 4, UUID 'd79bb52d-8a1d-4783-89c5-81743c50e5b0', UUID 'a4f1e02e-5c02-4936-af15-0208c4b41234');             
CREATE CACHED TABLE "PUBLIC"."ROLES"(
    "ID" INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 3) NOT NULL,
    "DESCRIPTION" CHARACTER VARYING(255),
    "NAME" CHARACTER VARYING(255)
);             
ALTER TABLE "PUBLIC"."ROLES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4A" PRIMARY KEY("ID");       
-- 2 +/- SELECT COUNT(*) FROM PUBLIC.ROLES;   
INSERT INTO "PUBLIC"."ROLES" VALUES
(1, 'Usuario registrado normalmente', 'ROLE_USER'),
(2, 'Usuario registrado con permisos administrativos', 'ROLE_ADMIN');               
CREATE CACHED TABLE "PUBLIC"."USERS"(
    "ID" UUID NOT NULL,
    "EMAIL" CHARACTER VARYING(255) NOT NULL,
    "ENABLED" BOOLEAN NOT NULL,
    "FIRST_NAME" CHARACTER VARYING(255),
    "LASTNAME" CHARACTER VARYING(255),
    "PASSWORD" CHARACTER VARYING(255)
);    
ALTER TABLE "PUBLIC"."USERS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_4D" PRIMARY KEY("ID");       
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.USERS;   
INSERT INTO "PUBLIC"."USERS" VALUES
(UUID '16ef4644-dac7-4c0c-b2db-15a9a6d10f7b', 'admin@admin.com', TRUE, 'Admin', 'Admin', '$2a$10$mY9vN438tURy1ihASaVB7O3CzKmUYCzr0KTKoOLyYUV5t7XlOj5AC'),
(UUID '602ed6a4-cfa9-4bff-87e5-a105fcf47ebd', 'user@user.com', TRUE, 'User', 'User', '$2a$10$ZaJ.sT2OUa9QlQGfeCizQuNps9AmFz59huIoUGJmtqMHXXXVcQWmC'),
(UUID 'd79bb52d-8a1d-4783-89c5-81743c50e5b0', 'trueblue.aetos@gmail.com', TRUE, 'Test', 'Test', '$2a$10$MYBiyp2WvSY5ogKWMJC2J.duh.URpGbPcqOyFpS2IDdD5zPunYNjq');       
CREATE CACHED TABLE "PUBLIC"."USERS_ROLES"(
    "USER_ID" UUID NOT NULL,
    "ROLE_ID" INTEGER NOT NULL
); 
ALTER TABLE "PUBLIC"."USERS_ROLES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_A" PRIMARY KEY("USER_ID", "ROLE_ID");  
-- 3 +/- SELECT COUNT(*) FROM PUBLIC.USERS_ROLES;             
INSERT INTO "PUBLIC"."USERS_ROLES" VALUES
(UUID '16ef4644-dac7-4c0c-b2db-15a9a6d10f7b', 2),
(UUID '602ed6a4-cfa9-4bff-87e5-a105fcf47ebd', 1),
(UUID 'd79bb52d-8a1d-4783-89c5-81743c50e5b0', 1);            
CREATE CACHED TABLE "PUBLIC"."VEHICLE_IMAGES"(
    "ID" BIGINT GENERATED BY DEFAULT AS IDENTITY(START WITH 1 RESTART WITH 33) NOT NULL,
    "FILENAME" CHARACTER VARYING(255),
    "VEHICLE_ID" UUID
);   
ALTER TABLE "PUBLIC"."VEHICLE_IMAGES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_D" PRIMARY KEY("ID");               
-- 5 +/- SELECT COUNT(*) FROM PUBLIC.VEHICLE_IMAGES;          
INSERT INTO "PUBLIC"."VEHICLE_IMAGES" VALUES
(1, 'cf05828b-6f8c-4d9b-a36d-527db1ec054d_1corolla1.jpg', UUID 'a4f1e02e-5c02-4936-af15-0208c4b41234'),
(2, 'f5b0b44e-97ce-450a-9d03-53b7e71c9fbe_corolla_xei_2019_interior_preto.webp', UUID 'a4f1e02e-5c02-4936-af15-0208c4b41234'),
(3, '4b73ff2d-c7c1-429c-aa64-255168833b93_Toyota-Corolla-2019--2-.webp', UUID 'a4f1e02e-5c02-4936-af15-0208c4b41234'),
(4, '3f468517-7e22-4b31-a6bd-a6252233d1de_Toyota-Corolla-2019--3-.webp', UUID 'a4f1e02e-5c02-4936-af15-0208c4b41234'),
(5, '853a0b9f-6963-4a64-9167-76517aaac83b_Toyota-Corolla-2019--4-.webp', UUID 'a4f1e02e-5c02-4936-af15-0208c4b41234'); 
CREATE CACHED TABLE "PUBLIC"."VEHICLES"(
    "ID" UUID NOT NULL,
    "BRAND" CHARACTER VARYING(255),
    "DAILY_COST" FLOAT(53) NOT NULL,
    "DESCRIPTION" CHARACTER VARYING(1000),
    "FUEL_TYPE" ENUM('BIODIESEL', 'DIESEL', 'ELECTRIC', 'GASOLINE', 'HYBRID'),
    "GEAR_SHIFT" ENUM('AUTOMATIC', 'CVT', 'MANUAL', 'SEMI_AUTOMATIC'),
    "MANUFACTURING_YEAR" INTEGER,
    "MODEL" CHARACTER VARYING(255),
    "NAME" CHARACTER VARYING(255),
    "NUMBER_OF_DOORS" INTEGER NOT NULL,
    "NUMBER_OF_SEATS" INTEGER NOT NULL,
    "AVG_RATING" FLOAT(53),
    "REGISTRATION_PLATE" CHARACTER VARYING(255),
    "CATEGORY_ID" BIGINT
);   
ALTER TABLE "PUBLIC"."VEHICLES" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_A6" PRIMARY KEY("ID");    
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.VEHICLES;
INSERT INTO "PUBLIC"."VEHICLES" VALUES
(UUID 'a4f1e02e-5c02-4936-af15-0208c4b41234', 'Toyota', 70.0, U&'El Toyota Corolla es un veh\00edculo confiable y eficiente, ideal para la conducci\00f3n diaria en ciudad y carretera. Su dise\00f1o moderno y aerodin\00e1mico optimiza el consumo de combustible. Adem\00e1s, ofrece tecnolog\00eda avanzada en seguridad y comodidad.', 'GASOLINE', 'AUTOMATIC', 2019, 'Corolla', 'Toyota Corolla', 5, 5, NULL, '78DJND', 34);    
CREATE CACHED TABLE "PUBLIC"."VEHICLES_CHARACTERISTICS"(
    "VEHICLE_ID" UUID NOT NULL,
    "CHARACTERISTIC_ID" BIGINT NOT NULL
);        
ALTER TABLE "PUBLIC"."VEHICLES_CHARACTERISTICS" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_82" PRIMARY KEY("VEHICLE_ID", "CHARACTERISTIC_ID");       
-- 1 +/- SELECT COUNT(*) FROM PUBLIC.VEHICLES_CHARACTERISTICS;
INSERT INTO "PUBLIC"."VEHICLES_CHARACTERISTICS" VALUES
(UUID 'a4f1e02e-5c02-4936-af15-0208c4b41234', 1);     
ALTER TABLE "PUBLIC"."REVIEW" ADD CONSTRAINT "PUBLIC"."CONSTRAINT_8" CHECK(("SCORE" <= 5)
    AND ("SCORE" >= 1)) NOCHECK;   
ALTER TABLE "PUBLIC"."CHARACTERISTIC_IMAGES" ADD CONSTRAINT "PUBLIC"."UKHHFM6IB0DICKEUTAOI1GQ7J68" UNIQUE NULLS DISTINCT ("CHARACTERISTIC_ID");               
ALTER TABLE "PUBLIC"."USERS" ADD CONSTRAINT "PUBLIC"."UK6DOTKOTT2KJSP8VW4D0M25FB7" UNIQUE NULLS DISTINCT ("EMAIL");           
ALTER TABLE "PUBLIC"."CHARACTERISTICS" ADD CONSTRAINT "PUBLIC"."UKP0BO0C4LI14UO36DJLE1DJ4YA" UNIQUE NULLS DISTINCT ("NAME");  
ALTER TABLE "PUBLIC"."VEHICLES" ADD CONSTRAINT "PUBLIC"."UKT1K36PKA00OFBFFKFE7AHQYA7" UNIQUE NULLS DISTINCT ("NAME");         
ALTER TABLE "PUBLIC"."CATEGORIES_IMAGES" ADD CONSTRAINT "PUBLIC"."UKET7V8OI1DTTLAOG1GWRKYJHGC" UNIQUE NULLS DISTINCT ("CATEGORY_ID");         
ALTER TABLE "PUBLIC"."CATEGORIES" ADD CONSTRAINT "PUBLIC"."UKT8O6PIVUR7NN124JEHX7CYGW5" UNIQUE NULLS DISTINCT ("NAME");       
ALTER TABLE "PUBLIC"."CHARACTERISTIC_IMAGES" ADD CONSTRAINT "PUBLIC"."FKND7FRG5UKG0HT8K6YHT3FOM94" FOREIGN KEY("CHARACTERISTIC_ID") REFERENCES "PUBLIC"."CHARACTERISTICS"("ID") ON DELETE CASCADE NOCHECK;    
ALTER TABLE "PUBLIC"."REVIEW" ADD CONSTRAINT "PUBLIC"."FK2SSS3O5Q7WRLPYM6VELF8XUX3" FOREIGN KEY("VEHICLE_ID") REFERENCES "PUBLIC"."VEHICLES"("ID") NOCHECK;   
ALTER TABLE "PUBLIC"."RESERVATIONS" ADD CONSTRAINT "PUBLIC"."FKB5G9IO5H54IWL2INKNO50PPLN" FOREIGN KEY("USER_ID") REFERENCES "PUBLIC"."USERS"("ID") NOCHECK;   
ALTER TABLE "PUBLIC"."REVIEW" ADD CONSTRAINT "PUBLIC"."FK6CPW2NLKLBLPVC7HYT7KO6V3E" FOREIGN KEY("USER_ID") REFERENCES "PUBLIC"."USERS"("ID") NOCHECK;         
ALTER TABLE "PUBLIC"."USERS_ROLES" ADD CONSTRAINT "PUBLIC"."FK2O0JVGH89LEMVVO17CBQVDXAA" FOREIGN KEY("USER_ID") REFERENCES "PUBLIC"."USERS"("ID") NOCHECK;    
ALTER TABLE "PUBLIC"."RESERVATIONS" ADD CONSTRAINT "PUBLIC"."FK7S1RLT0CCV2HJEAUBF52DI8ER" FOREIGN KEY("VEHICLE_ID") REFERENCES "PUBLIC"."VEHICLES"("ID") NOCHECK;             
ALTER TABLE "PUBLIC"."USERS_ROLES" ADD CONSTRAINT "PUBLIC"."FKJ6M8FWV7OQV74FCEHIR1A9FFY" FOREIGN KEY("ROLE_ID") REFERENCES "PUBLIC"."ROLES"("ID") NOCHECK;    
ALTER TABLE "PUBLIC"."VEHICLE_IMAGES" ADD CONSTRAINT "PUBLIC"."FKP6GW8MT61KTMSK5NUC4QID7I8" FOREIGN KEY("VEHICLE_ID") REFERENCES "PUBLIC"."VEHICLES"("ID") ON DELETE CASCADE NOCHECK;         
ALTER TABLE "PUBLIC"."CATEGORIES_IMAGES" ADD CONSTRAINT "PUBLIC"."FK7IERRW60ORGP11GHB05W8RCGE" FOREIGN KEY("CATEGORY_ID") REFERENCES "PUBLIC"."CATEGORIES"("ID") ON DELETE CASCADE NOCHECK;   
ALTER TABLE "PUBLIC"."VEHICLES" ADD CONSTRAINT "PUBLIC"."FKDJUWISECT6DIYJV2BK0J4WLCV" FOREIGN KEY("CATEGORY_ID") REFERENCES "PUBLIC"."CATEGORIES"("ID") NOCHECK;              
ALTER TABLE "PUBLIC"."VEHICLES_CHARACTERISTICS" ADD CONSTRAINT "PUBLIC"."FKQ72HEP9D946XWBYYUKEPUTPV7" FOREIGN KEY("CHARACTERISTIC_ID") REFERENCES "PUBLIC"."CHARACTERISTICS"("ID") NOCHECK;   
ALTER TABLE "PUBLIC"."VEHICLES_CHARACTERISTICS" ADD CONSTRAINT "PUBLIC"."FKNW026NFY6CYYQLFIHNS4VKCCT" FOREIGN KEY("VEHICLE_ID") REFERENCES "PUBLIC"."VEHICLES"("ID") NOCHECK; 
